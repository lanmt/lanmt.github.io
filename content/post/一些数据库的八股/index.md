---
title: 一些数据库的八股
date: 2024-08-28
description: 
categories:
    - 数据库
---
# 概述
## 关系型数据库和非关系型数据库
### 关系型数据库
关系型数据库最典型的数据结构是表，由二维表和其之间的联系组成的数据组织\
常见的关系型数据库有SQLServer、Mysql等\
优点
- **易于维护**
- **使用方便**
- **复杂查询**：可以使用SQL查询

缺点
- **读写性能差**，尤其是海量数据
- **固定的表结构**，缺乏灵活性
- 硬件I/O是一个很大的瓶颈
### 非关系型数据库
非关系型数据库严格上不是一种数据库，应该是一种数据结构化存储方法的集合，可以是文档或key-value等\
常见的非关系型数据库有redis等\
优点
- **格式灵活**，存储类型可以是key-value、文档、图片等
- **速度快**，可以使用硬盘或随机存储器作为载体
- **成本低**

缺点
- **不支持SQL**
- **无事务处理**
- **查询复杂**
## 范式
### 第一范式
确保每列的原子性，每列都是不可再分的最小数据单元
### 第二范式
在第一范式的基础上，要求表中每列都与主键相关。
### 第三范式
在第二范式的基础上，要求每列都与主键直接相关，且列与列不存在依赖关系。
### 第四范式
在第三范式的基础上，消除多值依赖。即如果一个表中的某些列可以取多个值（多个电话号码），那么这些多值依赖的列应该剥离出来，创建新的表处理。
### 第五范式
在第四范式的基础上，消除奇异化（超规范化）。奇异化是指在消除多值依赖时剥离出来的列存在相互关系，则需要再次拆分为独立的表进行处理。
# 事务
## 四大特性
- **隔离性**，一个事务在其最终提交之前，对其他事务不可见
- **原子性**，整个事务的操作要么全部执行，要么全部不执行
- **持久性**，一旦事务结束，则其对数据库的修改就会永久保存在数据库中
- **一致性**，数据库总是从一个一致性转态转换到另一个一致性状态。也就是满足如约束、触发器等一致性规则

对于单条 SQL 语句，数据库系统自动将其作为一个事务执行，这种事务被称为隐式事务。
## 并发事务会出现的问题
- **脏读**，读到了不存在的数据，这些数据被之前的事务删除了
- **不可重复读**，同一事务在不同时刻读同一批的数据可能不同
- **幻读**，针对插入操作，有一行的数据被修改，另一个事务插入了这一行更改前的记录行
- **可重复读**，在一个事务内，任一时刻读到的数据一致

mysql默认事务隔离级别是可重复读。\
另外数据可还可使用MVCC多版本并发控制，通过对数据行的多个办公控制来实现数据库的并发控制。或使用串行化的读写锁进行并发控制。
# 索引