---
title: 一些操作系统的八股
date: 2024-09-02
description: 
categories:
    - operating systeam
---
# 计算机系统基础
异步性、虚拟性、并发性、共享性\
异步性是指一个操作执行后，系统不需要等待结果，而是继续执行其他代码。
## 什么是操作系统
操作系统是管理计算机硬件和软件资源、给**应用程序和用户提供底层抽象**的一种系统软件。操作系统起到了计算机系统中的核心作用，它负责协调、控制和管理计算机**硬件设备、系统资源和应用程序**的执行。主要功能如下：
- 硬件管理
- 文件管理
- 进程管理
- 内存管理
- 系统安全与保护
- 用户接口
- 系统服务和应用程序支持
## 冯诺依曼结构
包括**存储器、中央处理器（算术逻辑单元、控制单元）、输入设备、输出设备、总线。**/
冯诺依曼结构的主要优点是将程序和数据存储在同一个存储器中，更加灵活。
## 宏内核和微内核
- **宏内核**

宏内核架构将操作系统的所有基本功能都集成在一个单一的大内核中。\
性能高但较复杂，安全风险大。
- **微内核**

将核心功能精简为最基本的部分，将其他的功能模块发在用户空间。模块化、灵活性、安全性高，但频繁的用户空间和内核空间切换会影响性能。
## 缓存
### 组织方式
- 直接映射缓存
- 全相联映射缓存
- 组相联映射缓存
### 替换策略
- 随机替换
- 最近最少使用
- 最不经常使用
- 先进先出
## 程序执行的基本过程
### 编译
- 对于编译型语言，源代码需通常需要经过**预编译、编译、汇编**，将其编译成目标代码，通常是二进制文件。
- 对于解释性语言，而不需要实现编译成可执行程序，而是在运行时由解释器逐行解释并执行。
### 加载
当可执行程序准备好后，操作系统将其加载到内存中。这个过程涉及分配内存、加载代码和数据等。
### 代码执行
### 系统调用与库函数
有可能需要与操作系统或其他库交互。
## 字符编码
- **ASCII**：ASCII是一种基于拉丁字母表的字符编码。
- **Unicode**：Unicode是一种广泛的字符集。
- **UTF-8**：UTF-8是Unicode字符集的一种编码方案。
# 内存管理
## 内存虚拟化
内存虚拟化是一种将物理资源抽象、管理和分配的技术。
### 主要目的
- 资源隔离与共享
- 易用性：简化了内存管理。
- 容错与恢复
- 内存优化
- 进程保护：每个进程都有自己的虚拟地址空间，
## 抖动
频繁发生页面置换操作，会导致系统性能急剧下降。
- 过高的内存需求
- 不恰当的内存分配
- 不合理的页置换算法
## elf文件格式
- ELF 头部
- 程序头表
- 段头表
- 段
## malloc的实现
- 初始化内存池，包括从操作系统请求内存，并建立数据结构跟踪可用的内存块（free list）。
- 查找合适的内存块，在free list使用特定的算法查找大小满足需求的内存块。
- 分割内存块
- 更新free list
- 返回内存块地址
## mmap
将文件映射到内存
# 进程与线程管理
## 进程、线程区别与联系？
- **进程**：进程是操作系统进行资源分配和调度的基本单位，是一个独立运行的程序实体。每个进程拥有独立的内存空间、文件描述符、寄存器状态等。进程之间的资源是相互隔离的，因此进程间通信需要通过操作系统提供的特定机制（如管道、消息队列、共享内存等）。由于进程拥有独立的资源，所以进程之间的切换和调度开销较大。
- **线程**：线程是操作系统调度执行的最小单位，是进程内的一个执行流。一个进程可以有多个线程，线程间共享进程资源（内存空间、文件描述符等）。由于共享进程资源，线程之间的通信比较简单，可以直接通过共享变量、锁等方式，相比于进程，线程之间的切换和调度开销较小。但多个线程并发时，需要处理好同步和互斥问题，避免竞争条件。

联系：一个进程可以有多个线程，这些线程共同完成任务，提高了程序的并发性。
## 进程的调度算法
- 时间片轮转
- 优先级调度
- 先到先得
- 短作业优先
- 多级队列：高优先级优先，相同优先级使用时间片轮转。
- 多级反馈队列：实现了优先级的动态设置。
